<!-- - var menuBorder = true-->
<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui" />
    <meta name="description"
        content="Stack admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities." />
    <meta name="keywords"
        content="admin template, stack admin template, dashboard template, flat admin template, responsive admin template, web app" />
    <meta name="author" content="PIXINVENT" />
    <title>Gramática y Lenguaje - EtnoPED-Lite</title>
    <link rel="shortcut icon" type="image/x-icon" href="app-assets/images/ico/PED.ico" />
    <link href="app-assets/css/font.css" rel="stylesheet" />
    <!-- BEGIN VENDOR CSS-->
    <link rel="stylesheet" type="text/css" href="app-assets/css/vendors.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/extensions/unslider.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/weather-icons/climacons.min.css" />
    <!-- END VENDOR CSS-->
    <!-- BEGIN STACK CSS-->
    <link rel="stylesheet" type="text/css" href="app-assets/css/app.css" /> <!-- END STACK CSS-->
    <!-- BEGIN Page Level CSS-->
    <link rel="stylesheet" type="text/css" href="app-assets/css/core/menu/menu-types/vertical-menu.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/fonts/simple-line-icons/style.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/css/core/colors/palette-gradient.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/css/pages/timeline.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/css/pages/gallery.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/Hover-master/css/hover.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/js/avnSkeleton/avnSkeleton.css" />
    <link rel="stylesheet" type="text/css" href="app-assets/css/core/colors/palette-callout.css">

    <!-- END Page Level CSS-->
    <!-- BEGIN Custom CSS-->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css" /> <!-- END Custom CSS-->
    <style>
        .bordesBotones {
            color: #fff;
            transition: all 0.3s ease-in-out 0s;
            box-shadow: rgba(138, 7, 164, 0.698) 0px 0px 0px 0px;
            animation: 1.2s cubic-bezier(0.8, 0, 0, 1) 0s infinite normal none running pulse;
            align-items: center;
            border: 0;
        }

        @keyframes pulse {
            100% {
                box-shadow: 0 0 0 20px rgba(193, 244, 246, 0);
            }
        }

        #Titulo {
            font-size: 60px;
            font-weight: bold;
            text-align: center;
            margin-top: 3%;
            color: #35006C;
        }

        .Listunidades {
            width: 60%;
            margin-left: 3%;
            height: 35%;
            overflow: auto;
            margin-top: 2%;
        }

        .contenido {
            display: flex;
            flex-wrap: wrap;
        }

        .unidad {
            background-color: #35006C;
            height: 100px;
            margin-top: 10px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            padding-left: 2%;
            font-weight: bold;
            color: #fff92e;
            font-size: 20px;
        }

        .unidad p {
            margin-bottom: 0px;
        }
        
        .imgPricipal {
            position: absolute;
            bottom: 8%;
            right: 11%;
        }
    </style>

</head>

<body style="overflow: hidden !important;">
    <!-- fixed-top-->
    <!-- ////////////////////////////////////////////////////////////////////////////-->
    <div class="app-content gramaticaPrincipal" style="margin-left: 0px">
        <h1 id="Titulo">GRAMÁTICA Y LENGUAJE</h1>

        <div class="contenido">
            <div class="Listunidades" id="LisUnidades">
            
            </div>
            <div id="ListTemas" style="display: none;"></div>
            <div><img class="imgPricipal" width="300px" src="images/interfaz/gramatica/imgPrincipal.png" /></div>

        </div>

    </div>

    <input type="hidden" id="unidadActual" value="" />

    <div class="loader-container">
        <input type="hidden" id="IdCont" value="" />
        <div onclick="history.back();" style="background-image: url(images/interfaz/gramatica/inicio.png);"
            class="loader loader1 bordesBotones"></div>
        <div id="btn_Video" style="display: none" onclick="$.VerListVideo()" class="loader loader3 box"></div>
        <div id="btn_Eval" style="display: none" onclick="$.VerEvaluacion()" class="loader loader5 box"></div>
        <div id="btn_Conver" style="display: none" onclick="$.VerConversacion()" class="loader loader6 box"></div>

        <div id="btn_AtrasUnid" style="display: none" onclick="$.VolverUnid()" class="loader loader4 box"></div>
        <div id="btn_AtrasTem" style="display: none;" onclick="$.VolverTema()" class="loader loader4 box"></div>

    </div>

    <!-- modal animaciones -->
    <div class="modal fade text-left" id="ModAnima" tabindex="-1" role="dialog" aria-labelledby="myModalLabel15"
        aria-hidden="true">
        <div class="modal-dialog  modal-xl modal-dialog-centered" role="document">
            <div class="modal-content" style="background-image: url(images/backgroundAsig.png);">
                <div class="modal-header bg-success white" style="background-image: url(images/headerMV.png);">
                    <h4 class="modal-title" id="titu_temaAnim">
                        Video tema</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>

                <div class="modal-body">
                    <div id='ListAnimaciones' style="height: 100%; overflow: auto;"></div>
                    <div id='DetAnimaciones' style="height: 100%; overflow: auto;display: none;">
                        <video id="videoclipAnima" width="100%" style="height:100%;" controls="controls"
                            title="Video title">
                            <source id="mp4videoAnima" src="" type="video/mp4" />
                        </video>
                    </div>

                </div>
                <div class="modal-footer">
                    <footer id="footerAutor"
                        style="text-align: left;position: absolute; left: 15px;  padding: 10px; font-size:9px; display:none;">
                    </footer>
                    <div id="btn_AtrasList" onclick="$.AtrasModAnima();" style="display: none;"
                        class="loaderV loader4 box"></div>
                    <div id="btn_salirModAnima" onclick="$.CloseModAnimaciones();" class="loaderV loader4 box"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- modal preguntas -->

    <div class="modal fade text-left" id="Modpreguntas" tabindex="-1" role="dialog" aria-labelledby="myModalLabel15"
        aria-hidden="true">
        <div class="modal-dialog  modal-lg modal-dialog-centered" role="document">
            <div class="modal-content" style="background-image: url(images/backgroundAsig.png);">
                <div class="modal-header bg-success white" style="background-image: url(images/headerMV.png);">
                    <h4 class="modal-title" style="display: inline-flex;" id="titu_Evaluacion"></h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>

                <div class="modal-body">
                    <div style="height: 100%; overflow: auto;">
                        <div class="app-content content" id="div-prueba" style="margin-left: 0px">
                            <div class="content-wrapper" style="padding: 0;">

                                <div class="content-body">
                                    <div class="tab-content px-1 pt-1" style="width: 100%;" id="Practica">
                                        <div class="card-content collapse show">
                                            <div class="card-body" style="padding: 0;">
                                                <div id="div-preguntas" style="width: 100%; transition: all linear 5s;"
                                                    class="bs-callout-primary callout-border-left callout-transparent p-1">
                                                    <h4 class="primary"></h4>
                                                    <p></p>
                                                </div>
                                            </div>
                                            <div id="div-opciones" style="transition: all linear 5s;" class="card-body">
                                            </div>
                                            <div id="div-resultado" style="display: none" class="card-body">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <div class="card">
                                                            <div class="card-content">
                                                                <div class="row">
                                                                    <div
                                                                        class="col-lg-2 col-md-12 col-sm-12 border-right-blue-grey border-right-lighten-5">
                                                                    </div>
                                                                    <div
                                                                        class="col-lg-8 col-md-12 col-sm-12 border-right-blue-grey border-right-lighten-5">
                                                                        <div class="card-body text-center">
                                                                            <div class="card-header mb-0">
                                                                                <h2 class="success" id="resulMensaje">
                                                                                    FELICITACIONES
                                                                                </h2>
                                                                                <h3 id="resulMensajePunt"
                                                                                    class="display-4 blue-grey darken-1">

                                                                                </h3>
                                                                            </div>
                                                                            <div class="card-content">
                                                                                <div><img id="resulImg" src=""
                                                                                        width="50%"
                                                                                        class="rounded-circle img-border"
                                                                                        alt="Card image" />
                                                                                </div>
                                                                                <ul class="list-inline clearfix mt-2">
                                                                                    <li
                                                                                        class="border-right-blue-grey border-right-lighten-2 pr-2">
                                                                                        <h1 id="resulCorrectas"
                                                                                            class="blue-grey darken-1 text-bold-400">

                                                                                        </h1>
                                                                                        <span class="success">
                                                                                            <i class="icon-like"></i>
                                                                                            Correctas</span>
                                                                                    </li>
                                                                                    <li class="pl-2">
                                                                                        <h1 id="resulInconrrectas"
                                                                                            class="blue-grey darken-1 text-bold-400">

                                                                                        </h1>
                                                                                        <span class="warning darken-2">
                                                                                            <i class="icon-dislike"></i>
                                                                                            Incorrectas</span>
                                                                                    </li>
                                                                                </ul>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div
                                                                        class="col-lg-2 col-md-12 col-sm-12 border-right-blue-grey border-right-lighten-5">
                                                                    </div>
                                                                    <div
                                                                        class="col-lg-12 col-md-12 col-sm-12 text-center">
                                                                        <div class="form-group">
                                                                            <button type="button" class="buttonResult"
                                                                                onclick="$.NuevaPractica();">
                                                                                <i class="fa fa-plus-square-o"></i>
                                                                                Nuevas Preguntas
                                                                            </button>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="padding: 0;">
                    <footer id="footerAutor"
                        style="text-align: left;position: absolute; left: 15px;  padding: 10px; font-size:9px; display:none;">
                    </footer>

                    <div id="btn_salirEval" onclick="$.CloseEval();" class="loaderV loader4 box"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer footer-static footer-light navbar-border" style="margin-left: 0px">
        <p class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2">
            <span class="float-md-left d-block d-md-inline-block">Copyright &copy;
                <script>
                    document.write(new Date().getFullYear());
                </script>
                <a class="text-bold-800 grey darken-2" href="#" target="_blank">EtnoPED Lite
                </a>, Todos los Derechos
                Reservados.
            </span>
        </p>
    </footer>

    <!-- BEGIN VENDOR JS-->
    <script src="app-assets/vendors/js/vendors.min.js" type="text/javascript"></script>
    <!-- BEGIN VENDOR JS-->
    <!-- BEGIN PAGE VENDOR JS-->
    <script src="app-assets/vendors/js/extensions/unslider-min.js" type="text/javascript"></script>
    <!-- END PAGE VENDOR JS-->
    <!-- BEGIN STACK JS-->
    <script src="app-assets/js/core/app-menu.js" type="text/javascript"></script>
    <script src="app-assets/js/core/app.js" type="text/javascript"></script>

    <!-- END STACK JS-->
    <!-- BEGIN PAGE LEVEL JS-->
    <script src="app-assets/js/avnPlugin.js" type="text/javascript"></script>

    <script src="app-assets/js/avnSkeleton/avnSkeleton.js" type="text/javascript"></script>
    <script src="app-assets/js/jquery-migrate-3.0.0.min.js" type="text/javascript"></script>
    <script src="app-assets/js/All.js" type="text/javascript"></script>

    <!-- END PAGE LEVEL JS-->

    <script>

        let datos;
        let limit = 10;
        const randomElements = [];
        let currentIndex = 0;
        var $wrapper = $('.wrapper');
        let pregInconrrectas = 0;
        let pregCorrectas = 0;

        $(document).ready(function () {
            let arrayPreguntas = [];
            let preguntasMostradas = [];
            $.extend({
                cargarUnidades: function () {
                    const xhttp = new XMLHttpRequest();
                    xhttp.open("GET", "contenidoJSON/unidades.json", true);
                    xhttp.send();

                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            let datos = JSON.parse(xhttp.responseText);

                            let x = 1;
                            let ContUnidades = '';
                            for (let itemUnid of datos) {
                                ContUnidades +='<div data-id="' + itemUnid.id + '" data-nombre="' + itemUnid.nombre + '" onclick="$.mostrarTemas(this)" class="unidad">' + itemUnid.nombre + '</div>';
                                x++;                            
                            }
                            $("#LisUnidades").html(ContUnidades);
                        }
                    };
                },
                mostrarTemas: function (element) {
                    let unidad = element.getAttribute('data-id');
                    let nombre = element.getAttribute('data-nombre');

                    document.getElementById("titu_Evaluacion").innerHTML = "Evaluación -" + nombre;
                    document.getElementById("Titulo_asig").innerHTML = nombre;

                    $("#unidadActual").val(unidad);

                    const xhttp = new XMLHttpRequest();
                    xhttp.open("GET", "contenidoJSON/tematicas.json", true);
                    xhttp.send();

                    $("#unidades").hide();
                    $("#Temas").show();
                    $("#btn_AtrasUnid").show();

                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            let datos = JSON.parse(xhttp.responseText);
                            let arrayTemas = datos.filter((e) => e.unidad == unidad);
                            let x = 1;
                            let ContTemas = "";
                            let display = 'block';
                            for (let itemTem of arrayTemas) {
                                if (itemTem.objetivo == null) {
                                    display = 'none';
                                }
                                ContTemas += '<div data-tema="' + itemTem.id + '" onclick="$.mostrarDetTemas(this)" class="temasClase  col-lg-12 col-md-12 col-sm-12"><p>' + itemTem.titulo + '</p><div class="pstyle" style="display: ' + display + '">' + itemTem.objetivo + '</div><p class="consUsoTem">' + x + '</p></div>'
                                x++;
                                display = 'block';
                            }

                            $("#LisTemas").html(ContTemas);
                        }
                    };

                    $.verfEval(unidad);
                },
                verfEval: function (unid) {
                    const xhttp = new XMLHttpRequest();
                    xhttp.open("GET", "contenidoJSON/preguntas.json", true);
                    xhttp.send();

                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            let datos = JSON.parse(xhttp.responseText);
                            let preguntas = datos.filter((e) => e.unidad == unid);

                            tPreg = preguntas.length;

                            if (tPreg > 0) {
                                $("#btn_Eval").show();
                            } else {
                                $("#btn_Eval").hide();
                            }

                        }
                    };
                },
                mostrarDetTemas: function (element) {

                    let idcont = element.getAttribute("data-tema");
                    $wrapper.avnSkeleton();
                    let xhr = new XMLHttpRequest();
                    xhr.overrideMimeType("application/json");
                    xhr.open('GET', "contenidoJSON/detTematicas.json", true);
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4 && xhr.status === 200) {

                            let datos = JSON.parse(xhr.responseText);
                            let arrayTemas = datos.filter((e) => e.id == idcont);
                            let contenidoHTML = '';

                            arrayTemas.forEach(itemTem => {
                                contenidoHTML += itemTem.contenido;
                                $.habilitarVideo(itemTem.id);
                            });

                            $wrapper.avnSkeleton("remove");
                            $wrapper.find("> main").append(contenidoHTML);

                            // Evento de clic y táctil para abrir modal
                            $("#DetContTema img").on("click touchstart", function () {
                                abrirModal(this.src);
                            });

                            $("#IdCont").val(idcont);
                            $("#Temas").hide();
                            $("#DetContTema").show();
                            $("#btn_AtrasUnid").hide();
                            $("#btn_AtrasTem").show();
                        }
                        else if (xhr.readyState === 4 && xhr.status !== 200) {
                            console.error('Error fetching data:', xhr.statusText);
                        }
                    };
                    xhr.send();

                    function abrirModal(imagenSrc) {
                        // Crear un modal...
                        var modal = document.createElement("div");
                        modal.classList.add("modal-container");

                        var imagenModal = document.createElement("img");
                        imagenModal.src = imagenSrc;

                        modal.appendChild(imagenModal);

                        var closeButton = document.createElement("button");
                        closeButton.innerHTML = "<i class='fa fa-close'></i>";
                        closeButton.classList.add("modal-close-button");
                        modal.appendChild(closeButton);

                        document.body.appendChild(modal);

                        closeButton.addEventListener("click", function () {
                            document.body.removeChild(modal);
                        });

                        document.body.addEventListener("touchstart", function closeOnTouchOutside(event) {
                            if (!modal.contains(event.target) && event.target !== closeButton) {
                                document.body.removeChild(modal);
                                document.body.removeEventListener("touchstart", closeOnTouchOutside);
                            }
                        });
                    }
                },
                habilitarVideo: function (video) {
                    const xhttp = new XMLHttpRequest();
                    xhttp.open("GET", "contenidoJSON/multimedia.json", true);
                    xhttp.send();

                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            let datos = JSON.parse(xhttp.responseText);
                            let arrayVideos = datos.filter((e) => e.tematica == video);
                            if (arrayVideos.length > 0) {
                                $("#btn_Video").show();
                            } else {
                                $("#btn_Video").hide();
                            }

                        }
                    };
                },
                VerListVideo: function () {
                    let idcont = $("#IdCont").val();

                    $("#ModAnima").modal({ backdrop: 'static', keyboard: false }); nm
                    const xhttp2 = new XMLHttpRequest();
                    xhttp2.open("GET", "contenidoJSON/multimedia.json", true);
                    xhttp2.send();

                    xhttp2.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {

                            let datos = JSON.parse(xhttp2.responseText);
                            let arrayVideos = datos.filter((e) => e.tematica == idcont);

                            var contenido = '';
                            console.log(arrayVideos);
                            let x = 1;
                            for (let itemVide of arrayVideos) {
                                contenido += '<div class="callout-bordered callout-videos p-1 mb-1" onclick="$.MostAnim(this.id)" id="' + x + '" data-ruta="' + itemVide.nombre.slice(0, -4).toLowerCase() + '" data-archivo="' + itemVide.url_contenido + '" style="">'
                                    + '<div class="media align-items-stretch">'
                                    + '<div class="media-body p-1 ml-1">'
                                    + "<strong style='font-weight: bold; font-size:24px;'>" + itemVide.nombre.slice(0, -4).toLowerCase() + "</strong>"
                                    + "</div>"
                                    + "</div>"
                                    + "</div>";
                                x++;
                            }

                            $("#ListAnimaciones").html(contenido);

                        }
                    };
                },
                MostAnim: function (id) {
                    $('#footerAutor').hide();
                    $("#DetAnimaciones").show();
                    $("#ListAnimaciones").hide();
                    $("#btn_AtrasList").show();
                    $("#btn_atrasModAnima").show();
                    $("#btn_salirModAnima").hide();
                    var videoID = 'videoclipAnima';
                    var sourceID = 'mp4videoAnima';
                    var nomarchi = $('#' + id).data("archivo");
                    var TitVideo = $('#' + id).data("ruta");
                    var newmp4 = "video/" + nomarchi;
                    // var newmp4 = "file:///storage/emulated/0/DCIM/" + carpetaSeleccionada + "/" + nomarchi;
                    $('#' + videoID).get(0).pause();
                    $('#' + sourceID).attr('src', newmp4);
                    $('#' + videoID).get(0).load();
                    $('#' + videoID).get(0).play();
                },
                VerEvaluacion: function () {
                    $("#Modpreguntas").modal({ backdrop: 'static', keyboard: false });
                    let idUni = $('#unidadActual').val();

                    limit = 10;
                    datos = [];
                    limit = 10;
                    randomElements.length = 0;
                    currentIndex = 0;
                    arrayPreguntas.length = 0;
                    preguntasMostradas.length = 0;
                    pregInconrrectas = 0;
                    pregCorrectas = 0;

                    const xhttp2 = new XMLHttpRequest();
                    xhttp2.open("GET", "contenidoJSON/preguntas.json", true);
                    var loader = '<div class="loader">Cargando...</div>';
                    $("#div-preguntas").html(loader);
                    xhttp2.send();

                    xhttp2.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            $("#div-preguntas").html("");
                            let preguntas = JSON.parse(xhttp2.responseText);

                            arrayPreguntas = preguntas.filter((e) => e.unidad == idUni);



                            if (arrayPreguntas.length < 10) {
                                limit = arrayPreguntas.length;
                            }

                            for (let i = 0; i < limit; i++) {
                                const randomIndex = obtenerIndiceAleatorio();
                                randomElements.push(arrayPreguntas[randomIndex]);
                            }


                            mostPregunta();
                        }
                    };



                },
                MostOpciones: function (idPreg) {
                    const xhttp2 = new XMLHttpRequest();
                    xhttp2.open("GET", "contenidoJSON/opciones.json", true);
                    var loader = '<div class="loader">Cargando...</div>';
                    $("#div-opciones").html(loader);
                    xhttp2.send();

                    var contenido = "";
                    $("#div-opciones").html(contenido);
                    xhttp2.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            $("#div-opciones").html("");
                            let opciones = JSON.parse(xhttp2.responseText);
                            let arrayOpciones = opciones.filter((e) => e.pregunta == idPreg);
                            var x = 1;
                            for (let itemOpc of arrayOpciones) {
                                contenido += ' <div style="width: 100%; cursor: pointer;" id="div-opcion' + x + '"  class="bs-callout-info callout-square callout-bordered callout-transparent mt-1 hvr-grow-shadow" onclick="$.VerfResp(' + x + ');" >' + '<div class="media align-items-stretch">' + '<div class="media-body p-1"><input type="hidden" id="idCorrecta' + x + '" name="correcta[]" value="' + itemOpc.correcta + '" />' + itemOpc.opciones + "</div>" + '<div id="div-bd-inf' + x + '" class="d-flex align-items-center bg-info callout-arrow-right position-relative p-2">' + '<i id="i-icon' + x + '" class="fa fa-info white font-medium-5"></i>' + "</div>" + "</div>" + "</div>";
                                x++;
                            }

                            $("#div-opciones").html(contenido);
                        }
                    };
                },
                VerfResp: function (id) {
                    var Correcta = $("#idCorrecta" + id).val();
                    let divOpciones = document.getElementById("div-opciones");
                    divOpciones.classList.add("bloqOpciones");
                    $("#div-opcion" + id).removeClass("bs-callout-info callout-square callout-bordered callout-transparent mt-1 hvr-grow-shadow");
                    $("#div-bd-inf" + id).removeClass("d-flex align-items-center bg-info callout-arrow-right position-relative p-2");
                    $("#i-icon" + id).removeClass("fa fa-info white font-medium-5");
                    if (Correcta == "si") {
                        $("#div-opcion" + id).addClass("bs-callout-success callout-square callout-bordered callout-transparent mt-1 hvr-grow-shadow");
                        $("#div-bd-inf" + id).addClass("d-flex align-items-center bg-success callout-arrow-right position-relative p-2");
                        $("#i-icon" + id).addClass("fa fa-check white font-medium-5");
                        pregCorrectas++;
                    } else {
                        $("#div-opcion" + id).addClass("bs-callout-warning callout-square callout-bordered callout-transparent mt-1 hvr-grow-shadow");
                        $("#div-bd-inf" + id).addClass("d-flex align-items-center bg-warning callout-arrow-right position-relative p-2");
                        $("#i-icon" + id).addClass("fa fa-times white font-medium-5");

                        // Busca opcion correcta
                        $("input[name='correcta[]']").each(function (indice, elemento) {
                            if ($(elemento).val() === "si") {
                                var id = elemento.id.slice(-1);

                                $("#div-opcion" + id).removeClass("bs-callout-info callout-square callout-bordered callout-transparent mt-1 hvr-grow-shadow");
                                $("#div-bd-inf" + id).removeClass("d-flex align-items-center bg-info callout-arrow-right position-relative p-2");
                                $("#i-icon" + id).removeClass("fa fa-info white font-medium-5");
                                $("#div-opcion" + id).addClass("bs-callout-success callout-square callout-bordered callout-transparent mt-1 hvr-grow-shadow");
                                $("#div-bd-inf" + id).addClass("d-flex align-items-center bg-success callout-arrow-right position-relative p-2");
                                $("#i-icon" + id).addClass("fa fa-check white font-medium-5");
                            }
                        });
                        pregInconrrectas++;
                    }

                    setTimeout(mostPregunta, 3000);
                },

                NuevaPractica: function () {

                    $("#div-opciones").show();
                    $("#div-preguntas").show();
                    $("#div-resultado").hide();
                    currentIndex = 0;
                    pregCorrectas = 0;
                    pregInconrrectas = 0;
                    $.VerEvaluacion();
                },
                CloseEval: function () {
                    $('#Modpreguntas').modal('toggle');
                },
                VolverUnid: function () {
                    $("#Temas").hide();
                    $("#unidades").show();
                    $("#btn_AtrasUnid").hide();
                    $("#btn_Eval").hide();
                    $("#Titulo_asig").html("Gramática y lenguaje - Unidades");
                },
                VolverTema: function () {
                    $("#DetContTema").hide();
                    $("#Temas").show();
                    $("#btn_AtrasTem").hide();
                    $("#btn_Video").hide();
                    $("#btn_AtrasUnid").show();
                    $wrapper.avnSkeleton('display');
                },
                AtrasModAnima: function () {
                    $("#ListAnimaciones").show();
                    $("#DetAnimaciones").hide();
                    $("#btn_salirModAnima").show();
                    $("#btn_AtrasList").hide();
                    var videoID = 'videoclipAnima';
                    $('#' + videoID).get(0).pause();
                    $("#footerAutor").hide();
                },
                CloseModAnimaciones: function () {
                    $('#ModAnima').modal('toggle');
                },
            }); //
            $.cargarUnidades();

            function mostPregunta() {

                const entries = Object.entries(randomElements);
                let divOpciones = document.getElementById("div-opciones");
                divOpciones.classList.remove("bloqOpciones");
                var preg = "";
                $("#div-preguntas").html(preg);
                if (currentIndex < entries.length) {
                    const entry = entries[currentIndex];
                    preg += '<h4 class="primary">' + entry[1]["tema"] + "</h4>";
                    if (entry[1]["enunciado"] != null) {
                        preg += entry[1]["enunciado"];
                    }

                    preg += entry[1]["pregunta"];
                    console.log(preg);
                    $("#div-preguntas").html(preg);
                    $.MostOpciones(entry[1]["idpreg"]);
                    currentIndex++;
                } else {
                    $("#div-resultado").show();
                    $("#div-opciones").hide();
                    $("#div-preguntas").hide();

                    if (pregCorrectas > 5) {
                        $("#resulMensaje").html("FELICITACIONES");
                        $("#resulMensaje").addClass("success");
                        $("#resulImg").attr("src", "images/victoria.gif");
                    } else {
                        $("#resulMensaje").html("SIGUE INTENTANDOLO");
                        $("#resulMensaje").addClass("warning");
                        $("#resulImg").attr("src", "images/derrota.gif");
                    }

                    $("#resulMensajePunt").html(pregCorrectas + "/" + limit);
                    $("#resulCorrectas").html(pregCorrectas);
                    $("#resulInconrrectas").html(pregInconrrectas);
                }
            }

            function obtenerIndiceAleatorio() {
                let indice = Math.floor(Math.random() * arrayPreguntas.length);

                while (preguntasMostradas.includes(indice)) {
                    indice = Math.floor(Math.random() * arrayPreguntas.length);
                }
                preguntasMostradas.push(indice);
                return indice;
            }

        });
    </script>
</body>

</html>